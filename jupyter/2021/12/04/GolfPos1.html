<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Golf body position recognition | Thomas Simm</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Golf body position recognition" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Recognising body parts during golf swing, step 1" />
<meta property="og:description" content="Recognising body parts during golf swing, step 1" />
<link rel="canonical" href="https://thomashsimm.com/jupyter/2021/12/04/GolfPos1.html" />
<meta property="og:url" content="https://thomashsimm.com/jupyter/2021/12/04/GolfPos1.html" />
<meta property="og:site_name" content="Thomas Simm" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-04T00:00:00-06:00" />
<script type="application/ld+json">
{"datePublished":"2021-12-04T00:00:00-06:00","url":"https://thomashsimm.com/jupyter/2021/12/04/GolfPos1.html","@type":"BlogPosting","headline":"Golf body position recognition","dateModified":"2021-12-04T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://thomashsimm.com/jupyter/2021/12/04/GolfPos1.html"},"description":"Recognising body parts during golf swing, step 1","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://thomashsimm.com/feed.xml" title="Thomas Simm" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Thomas Simm</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Golf body position recognition</h1><p class="page-description">Recognising body parts during golf swing, step 1</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-12-04T00:00:00-06:00" itemprop="datePublished">
        Dec 4, 2021
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#jupyter">jupyter</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/ThomasHSimm/THS_website/tree/master/_notebooks/2021-12-04-GolfPos1.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/ThomasHSimm/THS_website/master?filepath=_notebooks%2F2021-12-04-GolfPos1.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/ThomasHSimm/THS_website/blob/master/_notebooks/2021-12-04-GolfPos1.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#Introduction">Introduction </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Steps-in-this-page">Steps in this page </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Use-the-video-analysis-dataset-to-create-images-of-golf-swings">Use the video analysis dataset to create images of golf swings </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-12-04-GolfPos1.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction">
<a class="anchor" href="#Introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction<a class="anchor-link" href="#Introduction"> </a>
</h2>
<p>This is a first step in a project to analyse golf swings.</p>
<p>In this first step I try to identify different parts of the body and golf equipment during the golf swing. This step is of limited success for overall analysis but the steps used are useful for the lessons learnt.</p>
<p>This work uses deep learning to identify locations (vectors) on images and fitting by regression.</p>
<p>In this step I will use a dataSet found at <a href="https://github.com/wmcnally/golfdb"> Git Hub GolfSwing</a> and the paper of the work <a href="https://arxiv.org/abs/1903.06528">https://arxiv.org/abs/1903.06528</a>.</p>
<p>What this dataset/paper does is split the golf swing into a number of sequences based on the position of the body and golf club, e.g. start, golf club parallel to ground, striking the ball etc. We will call these the golf positions. These positions are shown below.</p>
<p><img src="/images/copied_from_nb/ghtop_images/Fig_GolfSwing.png" alt=""></p>
<p>The dataset includes a series of videos that have been characterised based on the different swing sequences.</p>
<h3 id="Steps-in-this-page">
<a class="anchor" href="#Steps-in-this-page" aria-hidden="true"><span class="octicon octicon-link"></span></a>Steps in this page<a class="anchor-link" href="#Steps-in-this-page"> </a>
</h3>
<ol>
<li>
<p>Download the video dataset and the details of the frames of the different positions</p>
</li>
<li>
<p>Create images at the different positions from the videos</p>
</li>
<li>
<p>Classify points on the images and a file for each image of these</p>
</li>
<li>
<p>Upload data to GitHub and download on notebook for analysis</p>
</li>
<li>
<p>Use deep learning to identify the positions on the images</p>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Use-the-video-analysis-dataset-to-create-images-of-golf-swings">
<a class="anchor" href="#Use-the-video-analysis-dataset-to-create-images-of-golf-swings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use the video analysis dataset to create images of golf swings<a class="anchor-link" href="#Use-the-video-analysis-dataset-to-create-images-of-golf-swings"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First I cloned the directory (<a href="https://github.com/wmcnally/golfdb">https://github.com/wmcnally/golfdb</a>) onto my local PC. I then need to identify which videos to use- I want the ones behind the golfer and preferably of lower frame rate.</p>
<p>Below are the names of the videos I selected</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">useVids</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">93</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">681</span><span class="p">,</span><span class="mi">1060</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">useVids</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I now want to find the frames in each video that represent the selected positions.</p>
<p>These exist in a '.pkl' file. So we open the file and then select the videos (rows) we want to use.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">file_path</span><span class="o">=</span> <span class="n">cda</span> <span class="o">+</span> <span class="s2">"\data</span><span class="se">\\</span><span class="s2">golfDB.pkl"</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span><span class="s2">"rb"</span><span class="p">))</span>
<span class="n">aa</span><span class="o">=</span><span class="p">[]</span>
<span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">useVids</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">aa</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">ii</span><span class="o">==</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
        
    <span class="k">else</span><span class="p">:</span>
        <span class="n">aa</span><span class="o">=</span><span class="n">aa</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">ii</span><span class="o">==</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">])</span>
       
    <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
<span class="n">aa</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">aa</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/images/copied_from_nb/ghtop_images/GOLF1.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the DataFrame (aa) the details we want are just the 'events' so we know what frames to save as images from the videos</p>
<p>First we create a function that takes a video location and details of the frames (or the selected golf positions) and then creates a new folder containing images of those frames.</p>
<p>This uses the library <code>cv2</code> and a secondary check to normalise the positions if it is different from that given (this was useful in earlier versions but later ones the frame number matched that given by the aa dataFrame).</p>
<p>The function works by finding a frame rate then stepping through the video by adding the time per frame after each step. If the frame is at a position given by the input (from aa) it is saved as an image.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">createImages</span><span class="p">(</span><span class="n">fila</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
    <span class="sd">''' </span>
<span class="sd">    Given a video file location (fila) it will save as images to a folder</span>
<span class="sd">    Given positions in video (pos) these images from the video are saved</span>
<span class="sd">    pos is created based on positions of swings</span>
<span class="sd">    '''</span>
    <span class="kn">import</span> <span class="nn">cv2</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">os</span>
    
    <span class="c1"># create a video capture object</span>
    <span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">fila</span><span class="p">)</span>
    
    <span class="c1"># get details of the video clip</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_MSEC</span><span class="p">)</span>
    
    <span class="n">frame_count</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_FRAME_COUNT</span><span class="p">)</span>
    <span class="n">fps</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_FPS</span><span class="p">)</span>
    <span class="n">duration_seconds</span> <span class="o">=</span> <span class="n">frame_count</span> <span class="o">/</span> <span class="n">fps</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'duration is '</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="s1">'. frame_count is '</span><span class="p">,</span><span class="n">frame_count</span><span class="p">,</span><span class="s1">'. fps is '</span><span class="p">,</span><span class="n">fps</span><span class="p">,</span><span class="s1">'. duration sec is'</span><span class="p">,</span><span class="n">duration_seconds</span><span class="p">)</span>
    
    <span class="c1">#alter pos based on frame count</span>
    <span class="n">posb4</span><span class="o">=</span><span class="n">pos</span>
    <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">/</span><span class="n">frame_count</span><span class="p">))</span>
    <span class="n">pos</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">nn</span><span class="p">)</span> <span class="k">for</span> <span class="n">nn</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
    <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="c1">#ignore first value and last two</span>
    
    
    <span class="c1"># create a folder if it doesn't exist</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">fila</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\\</span><span class="s1">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="s1">'_images'</span><span class="o">+</span><span class="n">folder</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

    
    <span class="n">vidcap</span> <span class="o">=</span> <span class="n">cap</span>
    
    <span class="c1"># this function creates an image from part of a video and </span>
    <span class="c1"># saves as a JPG file</span>
    <span class="k">def</span> <span class="nf">getFrame</span><span class="p">(</span><span class="n">sec</span><span class="p">,</span><span class="n">go</span><span class="p">):</span>
        <span class="n">vidcap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">CAP_PROP_POS_MSEC</span><span class="p">,</span><span class="n">sec</span><span class="p">)</span>
        <span class="n">hasFrames</span><span class="p">,</span><span class="n">image</span> <span class="o">=</span> <span class="n">vidcap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">hasFrames</span> <span class="ow">and</span> <span class="n">go</span><span class="p">:</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="s2">"frame</span><span class="si">{:d}</span><span class="s2">.jpg"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">)),</span> <span class="n">image</span><span class="p">)</span>     <span class="c1"># save frame as JPG file</span>
        <span class="k">return</span> <span class="n">hasFrames</span>
    
    <span class="c1"># goes through the video clip and steps through based on frame rate</span>
    <span class="n">sec</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">frameRate</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">/</span><span class="n">fps</span> 
    <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">go</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">while</span> <span class="n">success</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">sec</span> <span class="o">=</span> <span class="n">sec</span> <span class="o">+</span> <span class="n">frameRate</span>
        <span class="c1">#only saves images if at positions in pos</span>
        <span class="k">if</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
            <span class="n">go</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">go</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">success</span> <span class="o">=</span> <span class="n">getFrame</span><span class="p">(</span><span class="n">sec</span><span class="p">,</span><span class="n">go</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> images are extacted in </span><span class="si">{}</span><span class="s2">."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">,</span><span class="n">folder</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And below I call the script for the videos I selected</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="n">fila</span> <span class="o">=</span> <span class="n">cda</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">data</span><span class="se">\\</span><span class="s1">videos_160</span><span class="se">\\</span><span class="s1">'</span>
<span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">aai</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">aa</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
    <span class="n">fold</span> <span class="o">=</span> <span class="n">fila</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aai</span><span class="p">)</span><span class="o">+</span><span class="s1">'.mp4'</span>
    <span class="n">pos</span><span class="o">=</span><span class="n">aa</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">ii</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="o">-</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">ii</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">cII</span><span class="p">(</span><span class="n">fold</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">cap</span> <span class="o">=</span> <span class="n">createImages</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">fold</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So now we have a series of folders for each video with images given by the selected positions</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To be able to perform analysis on the images they first need to be labelled.</p>
<p>To do this I decided to take the <strong>manual</strong> approach and classify the images myself. I decided to choose the following regions in each image:</p>
<ul>
<li>The ball</li>
<li>The end of the golf club (clubhead)</li>
<li>The back wrist</li>
<li>the back elbow</li>
<li>the top of the head</li>
</ul>
<p>This is done using the follwing function</p>

</div>
</div>
</div>
</div>



  </div><a class="u-url" href="/jupyter/2021/12/04/GolfPos1.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Thomas H Simm</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/thomashsimm" title="thomashsimm"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/thomashsimm" title="thomashsimm"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
